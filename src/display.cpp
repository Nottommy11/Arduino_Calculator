// display.cpp
#include "display.h"

const int OLED_RESET_PIN = 4;
Adafruit_SSD1306 display(OLED_RESET_PIN);

// This is the bitmap for a calculator icon
const unsigned char PROGMEM calc[] =
		{0x01, 0xFF, 0xFF, 0x80, 0x03, 0x00, 0x00, 0xC0, 0x06, 0x00, 0x00, 0x60, 0x0C, 0x00, 0x00, 0x30,
		 0x08, 0x3F, 0xFC, 0x10, 0x08, 0xE0, 0x07, 0x10, 0x09, 0x80, 0x01, 0x90, 0x09, 0x00, 0x00, 0x90,
		 0x09, 0x00, 0x00, 0x90, 0x09, 0x00, 0x00, 0x90, 0x09, 0x00, 0x00, 0x90, 0x09, 0x00, 0x00, 0x90,
		 0x09, 0x00, 0x00, 0x90, 0x09, 0x80, 0x01, 0x90, 0x08, 0xE0, 0x07, 0x10, 0x08, 0x3F, 0xFC, 0x10,
		 0x08, 0x00, 0x00, 0x10, 0x08, 0x00, 0x00, 0x10, 0x08, 0x00, 0x00, 0x10, 0x08, 0x21, 0x84, 0x10,
		 0x08, 0x73, 0xCE, 0x10, 0x08, 0x5A, 0x5A, 0x10, 0x08, 0x73, 0xCE, 0x10, 0x08, 0x00, 0x00, 0x10,
		 0x08, 0x00, 0x00, 0x10, 0x08, 0x73, 0xCE, 0x10, 0x08, 0x5A, 0x5A, 0x10, 0x08, 0x73, 0xCE, 0x10,
		 0x0C, 0x21, 0x84, 0x30, 0x06, 0x00, 0x00, 0x60, 0x03, 0x00, 0x00, 0xC0, 0x01, 0xFF, 0xFF, 0x80};

// This function initializes the display and displays the opening message
void initDisplay()
{
	display.begin(SSD1306_SWITCHCAPVCC, 0x3C); // initialize with the I2C addr 0x3C (for the 128x32)

	// Clear the buffer.
	display.clearDisplay();
	display.setFont(&FreeSans9pt7b);

	// Set some parameters for the text and display the opening message.
	display.setTextColor(WHITE);
	display.setCursor(36, 12);
	display.print("Arduino");
	display.setCursor(36, 31);
	display.print("calculator!");
	display.drawBitmap(0, 0, calc, 32, 32, 1);
	display.display();
	delay(2000);

	// Clear the buffer.
	display.clearDisplay();

	// Reset parameters for the text.
	display.setFont();
	display.setTextSize(2);
}

// This function prints the string to the display
void printToDisplay(String str)
{
	// Clear the buffer and set the cursor to the top left corner.
	display.clearDisplay();
	display.setCursor(0, 0);

	// Print the string to the display.
	display.print(str);
	display.display();
}
